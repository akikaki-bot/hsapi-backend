import rateLimit from "express-rate-limit";
import { uuid as CreateUUID } from "../tools/uuid";

import { Request , Response } from "express";

export const limiter = rateLimit({
	windowMs: 15 * 60 * 1000, 
	limit: 100,
	standardHeaders: 'draft-7', 
	legacyHeaders: false, 
	message: async ( req  : Request , res : Response) => {
		const uuid = CreateUUID()
		return { status : -1 , body : { message : "Too Many Requests." , uuid: uuid } }
	}
})

/**
 *           _____                   _______                   _____                    _____                    _____                    _____                    _____                    _____          
         /\    \                 /::\    \                 /\    \                  /\    \                  /\    \                  /\    \                  /\    \                  /\    \         
        /::\____\               /::::\    \               /::\____\                /::\    \                /::\____\                /::\    \                /::\____\                /::\    \        
       /:::/    /              /::::::\    \             /:::/    /               /::::\    \              /:::/    /                \:::\    \              /::::|   |               /::::\    \       
      /:::/    /              /::::::::\    \           /:::/    /               /::::::\    \            /:::/    /                  \:::\    \            /:::::|   |              /::::::\    \      
     /:::/    /              /:::/~~\:::\    \         /:::/    /               /:::/\:::\    \          /:::/    /                    \:::\    \          /::::::|   |             /:::/\:::\    \     
    /:::/____/              /:::/    \:::\    \       /:::/    /               /:::/  \:::\    \        /:::/____/                      \:::\    \        /:::/|::|   |            /:::/  \:::\    \    
   /::::\    \             /:::/    / \:::\    \     /:::/    /               /:::/    \:::\    \      /::::\    \                      /::::\    \      /:::/ |::|   |           /:::/    \:::\    \   
  /::::::\    \   _____   /:::/____/   \:::\____\   /:::/    /      _____    /:::/    / \:::\    \    /::::::\    \   _____    ____    /::::::\    \    /:::/  |::|   | _____    /:::/    / \:::\    \  
 /:::/\:::\    \ /\    \ |:::|    |     |:::|    | /:::/____/      /\    \  /:::/    /   \:::\    \  /:::/\:::\    \ /\    \  /\   \  /:::/\:::\    \  /:::/   |::|   |/\    \  /:::/    /   \:::\ ___\ 
/:::/  \:::\    /::\____\|:::|____|     |:::|    ||:::|    /      /::\____\/:::/____/     \:::\____\/:::/  \:::\    /::\____\/::\   \/:::/  \:::\____\/:: /    |::|   /::\____\/:::/____/  ___\:::|    |
\::/    \:::\  /:::/    / \:::\    \   /:::/    / |:::|____\     /:::/    /\:::\    \      \::/    /\::/    \:::\  /:::/    /\:::\  /:::/    \::/    /\::/    /|::|  /:::/    /\:::\    \ /\  /:::|____|
 \/____/ \:::\/:::/    /   \:::\    \ /:::/    /   \:::\    \   /:::/    /  \:::\    \      \/____/  \/____/ \:::\/:::/    /  \:::\/:::/    / \/____/  \/____/ |::| /:::/    /  \:::\    /::\ \::/    / 
          \::::::/    /     \:::\    /:::/    /     \:::\    \ /:::/    /    \:::\    \                       \::::::/    /    \::::::/    /                   |::|/:::/    /    \:::\   \:::\ \/____/  
           \::::/    /       \:::\__/:::/    /       \:::\    /:::/    /      \:::\    \                       \::::/    /      \::::/____/                    |::::::/    /      \:::\   \:::\____\    
           /:::/    /         \::::::::/    /         \:::\__/:::/    /        \:::\    \                      /:::/    /        \:::\    \                    |:::::/    /        \:::\  /:::/    /    
          /:::/    /           \::::::/    /           \::::::::/    /          \:::\    \                    /:::/    /          \:::\    \                   |::::/    /          \:::\/:::/    /     
         /:::/    /             \::::/    /             \::::::/    /            \:::\    \                  /:::/    /            \:::\    \                  /:::/    /            \::::::/    /      
        /:::/    /               \::/____/               \::::/    /              \:::\____\                /:::/    /              \:::\____\                /:::/    /              \::::/    /       
        \::/    /                 ~~                      \::/____/                \::/    /                \::/    /                \::/    /                \::/    /                \::/____/        
         \/____/                                           ~~                       \/____/                  \/____/                  \/____/                  \/____/                                  
   
		 01100010 01101001 01110100 00101110 01101100 01111001 00101111 01101110 00101101 01101110 00101101 01101110 01101101 01101110 01101101
 */